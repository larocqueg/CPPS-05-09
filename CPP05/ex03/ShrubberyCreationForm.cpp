/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ShrubberyCreationForm.cpp                         :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: gde-la-r <gde-la-r@student.42porto.com>    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2025/10/05 15:24:24 by gde-la-r          #+#    #+#             */
/*   Updated: 2025/10/05 15:53:27 by gde-la-r         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "ShrubberyCreationForm.hpp"

ShrubberyCreationForm::ShrubberyCreationForm() : AForm("ShrubberyCreationForm", 145, 137), _target("Default")
{
}

ShrubberyCreationForm::ShrubberyCreationForm(const std::string& target) : AForm("ShrubberyCreationForm", 145, 137), _target(target)
{
}

ShrubberyCreationForm& ShrubberyCreationForm::operator=(const ShrubberyCreationForm& original)
{
  if (this != &original)
  {
    AForm::operator=(original);
  }
  return (*this);
}

ShrubberyCreationForm::~ShrubberyCreationForm()
{
}

void  ShrubberyCreationForm::execute(const Bureaucrat& b) const
{
  if (b.getGrade() > this->getExecGrade())
  {
    throw AForm::gradeTooLowException(
        "Bureaucrat " + b.getName() + " couldn't exeute " + this->getName() + ", grade is to low!"); 
  }
  if (this->getSign() && b.getGrade() <= this->getExecGrade())
  {
    std::cout << GREEN << "Bureaucrat " << b.getName() << " executed ShrubberyCreationForm and created " << this->_target << RESET << std::endl;
    std::ofstream file(this->_target.c_str());
    file << "                                                                                                                               \n\
                                                                      ....      ..  ..                                                      \n\
                                                        --          ------......  ..........                                                \n\
                                                                      ..::--..::  ..----......                                              \n\
                                                  --..                    ::::::::::  ::------......                                        \n\
                                            ..----          ....            ..--::    ::    ::::--------                                    \n\
                                            ----..  ......--................----::..          ::::::--------                                \n\
                                        ..  --..------------....----------::::      ..            ::::::::::                                \n\
                                      ......----::::::::::--------::--::++  ::      ..            ::::::::                                  \n\
                                    ......--------::..::::--::::::::::::            ..                ++                                    \n\
                              ........--::::++++++    ::::::::++++++++++..        ....--              ..                                    \n\
                              ........::++  ++                ++++++++--......------------..                                                \n\
                        ..  ........::++++                    ..++++++..----------..--------  ........  ....                                \n\
                      ..--..  ....::++          ..                ++++::--------....----..--------..--------                                \n\
                      --::--..::::++++          ....              ++    ++--------..--..----------..------::....                            \n\
                    --------::::--              ......                    --::------------------....--::::..--......                        \n\
                      ::    ::++      ..................    ..............++++::::--::::::----::----::::::::----........                    \n\
                              ..  ......................................--++++++++++++++++++++++++++++++::::----..--......                  \n\
                                  ----........  ..--....----  ....--------++++++++++++mm++++++mmmm++mm++::++--....----......                \n\
                                ..------..----------------------::----::++mmmm++++++++mm++++++++mm++++++++::----..--------......            \n\
                              ....::::::------------------------::::::::mmmmmmmmmmmm++++++++++++++++++++----::--::::----------              \n\
                  ....    ..........::::::------------::::::::::::::mmmmmmmmmmmmmmmmmmmmmmmmmm++++++++::::::::++::::::----------            \n\
                  ........    ......::::::::::::::::::::::++++++++++++MMmmmmmmMMMMmmmmmmmmMM++++++++++++++::::mm++mmmm::--------            \n\
          ..........    ........------::::++::::++++++++++mmmm++++++mmMMmmMMMMMMMM++MMMMMMMM++++++++++++++++::::::::::::::::----            \n\
          ............  ----------------++++++++++++++++++++++++MMMMMMMM++MMMMMMMM++MMMMMMmmMMMM        ++    ::    ..::    ::::            \n\
              --::--..----::::++++--++++++++++MMmm@@++++@@++++++MMMMMMMM++MMMMMM::MMMM++++..                                                \n\
            ::::::::::::::++++++++++++++++++mmmm@@++@@++++MMMM++++MMMMMMmmMMMM::mm++++mmMM                  ..                              \n\
              ::mm::++++++++++++++mm++++++mmmm@@@@++++++++@@MMmm++MMMMmmmmMM::mm++mmMMMM--....  ..--  --    ..--  ....  --                  \n\
              ::++  ..++mm++++++++++++mmmmmm@@##@@##++::::##MMmm++MMMM++mm::::++mmMMMM--------....--..----------..--------                  \n\
              ........++++++++++++mmmm::mmmm########++::--@@mmmm++MMmmmm::++++mmMMMMMM++++----..----------------------------..  ..          \n\
              ....  ....----------mm++::::++##++####++::::@@##mm++mmmm::::mmmmmm##MM@@++++++--::------::--------::++++::--------::          \n\
                  ......------------++++::::MM++####++::::++##mmMMmm::::::--mm##########mm++::::::::::++++--++++++++++++++++++++            \n\
            ....--........----------mm++::::####++##++::++--##mmmmmm::::::++mm######++@@mmmm::::mmmmmmmmmmmm++++++++++++++++++              \n\
                --::::..  --::------++mmmmmm######::....::::--mmMM++--::::++mm##mm####::mmmmMMmmmmmmmmmmmmmmMMmmmmMMmmMMmm++++              \n\
              --::--::::--::++::::++++mm++mm########++--++::----mm----::::::++######@@mm++mmMM::mmmmmmmmmmmm@@mmmm@@mmmmmm                  \n\
                    ::--::++++++++::mmmmmm++++########++--++----::----++++::mm####::++++MMMM++--++++++MMmmmmmmmmmmmmmm..--                  \n\
                      ::++    ++++++::--::::::mm++++++++++--::------::--::++++##::mm++MM++++++::++MMMM++::++++++++++                        \n\
                                      ::++++mm++::mmmm++++++::++--::::--::++mm::++++mmmmmm++++mm@@mm::::mmmmmmmmmmmm                        \n\
                            --::            ::  ++++mm++++::::----++::--++++++++++++MMMMmmMMmmmmmmmmmmmmmmmmmmmmmm                          \n\
                                          ----        MMmm::--..--------::++--++++mmMMMMMMMMMMmmmmMMMMmmmmmmMMMM                            \n\
                                                        MM++....------....--::::mm            ..mm  ::MM  ++                                \n\
                                  --::++                ..++--..::----....::::::                  mm    ..                                  \n\
                                                          ++::..::--::::..::::                                                              \n\
                                                          ++::--::--::::::++--                                                              \n\
                                                          ++::--::--::::++++::                                                              \n\
                                                          --++------::++++::::                                                              \n\
                                                          ..mm::----::++++++++                                                              \n\
                                                        ..::mm::----::++mmmm++                                                              \n\
                                                        --mmmm::----::++mm++++                                                              \n\
                                                    --  ::mmmm::----::++--++++        ::        ..                                          \n\
                                                      ++++mmmm++--::::++::++::            --..                                              \n\
                                              ::++++++mmmmmm++::--++++++--++::::mmmmmmmm++mm                                                \n\
                                            --++++mmmmmm++MM::----++mm::--++::++mm++++++::mm::  --                                          \n\
                                          ::::::::::::++mm::----++++mm++::--::::----++::::++::::--::                                        \n\
                                    ++++--::::::mmmmmm--------++++++mm++::::--mm++::mmmm::::::++++----                                      \n\
                                              ------++--::::::::++++MM++++::::--mmmmmmmm++++++++++++..                                      \n\
                                  --          ..------::::++++++++----::++++::::------------mmmm--............                              \n\
                                ..--------::::::++------::::------------::::++::..----------..........------------                          \n\
                            ----------::::::--..............------------------------------------------------                                \n\
                                  ------------------------------------------------------------------------  gde-la-r\n";
  }
  else
  {
    throw AForm::formNotSignedException(
        "Bureaucrat " + b.getName() + " couldn't execute " + this->getName() + ", Form not signed!");
  }
}
